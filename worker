  worker2:
    build: .
    container_name: worker2
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility,video
    volumes:
      - ./data:/app/data
    working_dir: /app
    command: python main.py --role worker --id 2 --host parameter_server --port 5000
    stdin_open: true
    tty: true
    shm_size: '2gb'

  worker3:
    build: .
    container_name: worker3
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility,video
    volumes:
      - ./data:/app/data
    working_dir: /app
    command: python main.py --role worker --id 3 --host parameter_server --port 5000
    stdin_open: true
    tty: true
    shm_size: '2gb'